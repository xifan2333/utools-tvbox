const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Search-H_TjBcmx.js","./vendor-Cr0QY1gi.js","./Player-BukyOpfh.js","./Player-pw0piqMB.css","./History-dzD4XccW.js","./Settings-DPts51bH.js"])))=>i.map(i=>d[i]);
import{r as e,w as t,o as n,a as r,c as a,b as s,d as o,v as i,e as l,n as c,t as u,T as d,f as m,g as p,h as g,i as f,u as y,F as h,j as v,k as b,l as x,m as w,p as k}from"./vendor-Cr0QY1gi.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const _={class:"text-white"},E={__name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"info",validator:e=>["success","warning","error","info"].includes(e)},duration:{type:Number,default:3e3},position:{type:String,default:"top",validator:e=>["top","bottom","center"].includes(e)}},setup(p){const g=p,f=e(!1),y=e(null),h={success:"i-ri-checkbox-circle-line",warning:"i-ri-alert-line",error:"i-ri-close-circle-line",info:"i-ri-information-line"},v={success:"bg-green-500",warning:"bg-yellow-500",error:"bg-red-500",info:"bg-gray-500"},b=()=>{f.value=!0,g.duration>0&&(y.value&&clearTimeout(y.value),y.value=setTimeout((()=>{f.value=!1}),g.duration))};return t((()=>g.message),(()=>{b()})),n((()=>{b()})),r((()=>{y.value&&clearTimeout(y.value)})),(e,t)=>(m(),a(d,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform translate-y-2 opacity-0"},{default:s((()=>[o(l("div",{class:c(["fixed left-1/2 transform -translate-x-1/2 z-50 px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2",[v[p.type],"top"===p.position?"top-4":"bottom"===p.position?"bottom-4":"top-1/2 -translate-y-1/2"]])},[l("i",{class:c([h[p.type],"text-white text-xl"])},null,2),l("span",_,u(p.message),1)],2),[[i,f.value]])])),_:1}))}},P={duration:3e3,position:"top"};let T=null,C=null,S=null;const j=()=>(C||(C=document.createElement("div"),C.id="toast-container",document.body.appendChild(C)),C),A=e=>{const t={...P,...e};if(T){S.unmount();const e=j();S=p(E,t),T=S.mount(e)}else{const e=j();S=p(E,t),T=S.mount(e)}return new Promise((e=>{setTimeout((()=>{e()}),t.duration)}))},L=()=>({success:(e,t=P.duration)=>A({message:e,type:"success",duration:t}),warning:(e,t=P.duration)=>A({message:e,type:"warning",duration:t}),error:(e,t=P.duration)=>A({message:e,type:"error",duration:t}),info:(e,t=P.duration)=>A({message:e,type:"info",duration:t})}),D={install:e=>{e.config.globalProperties.$toast={success:(e,t=P.duration)=>A({message:e,type:"success",duration:t}),warning:(e,t=P.duration)=>A({message:e,type:"warning",duration:t}),error:(e,t=P.duration)=>A({message:e,type:"error",duration:t}),info:(e,t=P.duration)=>A({message:e,type:"info",duration:t})}}},O=""+new URL("logo-Bipd5wes.png",import.meta.url).href,q={class:"p-4 flex items-center justify-between"},R=["src"],I={class:"mt-4 flex-1 overflow-auto"},N={class:"p-4 flex justify-center"},V=["title"],$={__name:"Sidebar",props:{isDark:{type:Boolean,default:!1}},emits:["toggle-theme"],setup(t,{emit:n}){const r=e(!0),a=n,d=[{name:"搜索",path:"/search",icon:"i-ri-search-line"},{name:"历史",path:"/history",icon:"i-ri-history-line"},{name:"设置",path:"/settings",icon:"i-ri-settings-line"}],p=()=>{r.value=!r.value},x=()=>{a("toggle-theme")};return(e,n)=>{const a=g("router-link");return m(),f("div",{class:c(["h-screen flex flex-col bg-light-600 dark:bg-gray-800 text-dark dark:text-gray-200 transition-all duration-300",r.value?"w-16":"w-64"])},[l("div",q,[l("div",{class:c(["flex items-center gap-2 transition-all duration-300",[r.value?"w-0 p-0 m-0 opacity-0 scale-95 pointer-events-none":"w-auto opacity-100 scale-100","overflow-hidden"]]),style:{"transition-property":"width, opacity, transform, margin, padding"}},[l("img",{src:y(O),class:"w-10 h-10 rounded-lg"},null,8,R),n[0]||(n[0]=l("h1",{class:"text-xl font-bold whitespace-nowrap"},"TV Box",-1))],2),l("button",{onClick:p,class:"p-2 bg-light-700 dark:bg-gray-700 hover:bg-light-800 dark:hover:bg-gray-600 rounded-lg transition-colors"},[l("i",{class:c([r.value?"i-ri-menu-fold-line":"i-ri-menu-unfold-line","text-xl"])},null,2)])]),l("nav",I,[(m(),f(h,null,v(d,(e=>b(a,{key:e.path,to:e.path,class:c(["flex items-center px-4 py-3 hover:bg-light-700 dark:hover:bg-gray-700 transition-colors",{"justify-center":r.value}]),"active-class":"bg-light-700 dark:bg-gray-700"},{default:s((()=>[l("i",{class:c([e.icon,"text-xl"])},null,2),o(l("span",{class:"ml-3"},u(e.name),513),[[i,!r.value]])])),_:2},1032,["to","class"]))),64))]),l("div",N,[l("button",{onClick:x,class:"p-2 bg-light-700 dark:bg-gray-700 hover:bg-light-800 dark:hover:bg-gray-600 rounded-lg transition-colors",title:t.isDark?"切换为亮色模式":"切换为暗色模式"},[l("i",{class:c([t.isDark?"i-ri-sun-line":"i-ri-moon-line","text-xl"])},null,2)],8,V)])],2)}}},B={class:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300"},F={class:"flex-1 overflow-auto p-4"},U={__name:"App",setup(r){const o=e(!1);n((()=>{const e=window.services.theme.getTheme();o.value="dark"===e,i()})),t(o,(e=>{i(),window.services.theme.setTheme(e?"dark":"light")}));const i=()=>{o.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},c=()=>{o.value=!o.value};return(e,t)=>{const n=g("router-view");return m(),f("div",B,[b($,{"is-dark":o.value,onToggleTheme:c},null,8,["is-dark"]),l("main",F,[b(n,null,{default:s((({Component:e})=>[b(d,{name:"fade",mode:"out-in"},{default:s((()=>[(m(),a(x(e)))])),_:2},1024)])),_:1})])])}}},z={},H=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};const a=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),o=(null==s?void 0:s.nonce)||(null==s?void 0:s.getAttribute("nonce"));r=e(t.map((e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in z)return;z[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(!!n)for(let n=a.length-1;n>=0;n--){const r=a[n];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,o&&s.setAttribute("nonce",o),document.head.appendChild(s),t?new Promise(((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)}))},K=[{path:"/",redirect:"/search"},{path:"/search",name:"Search",component:()=>H((()=>import("./Search-H_TjBcmx.js")),__vite__mapDeps([0,1]),import.meta.url)},{path:"/player/:id",name:"Player",component:()=>H((()=>import("./Player-BukyOpfh.js")),__vite__mapDeps([2,1,3]),import.meta.url)},{path:"/history",name:"History",component:()=>H((()=>import("./History-dzD4XccW.js")),__vite__mapDeps([4,1]),import.meta.url)},{path:"/settings",name:"Settings",component:()=>H((()=>import("./Settings-DPts51bH.js")),__vite__mapDeps([5,1]),import.meta.url)}],M=w({history:k(),routes:K}),W={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},G={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},J={class:"inline-block align-middle bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Q={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},X={class:"sm:flex sm:items-start"},Y={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Z={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-200",id:"modal-title"},ee={class:"mt-2"},te={class:"text-sm text-gray-500 dark:text-gray-400"},ne={__name:"Dialog",props:{title:{type:String,required:!0},content:{type:String,required:!0},onAccept:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}}},setup(t){const r=t,c=e(!1),p=()=>{c.value=!1},g=async()=>{await r.onAccept(),p()},f=()=>{r.onCancel(),p()};return n((()=>{c.value=!0})),(e,n)=>(m(),a(d,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:s((()=>[o(l("div",W,[l("div",G,[n[0]||(n[0]=l("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),l("div",J,[l("div",Q,[l("div",X,[l("div",Y,[l("h3",Z,u(t.title),1),l("div",ee,[l("p",te,u(t.content),1)])])])]),l("div",{class:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[l("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-500 text-base font-medium text-white hover:bg-blue-600 sm:ml-3 sm:w-auto sm:text-sm",onClick:g}," 确认 "),l("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:f}," 取消 ")])])])],512),[[i,c.value]])])),_:1}))}};let re=null,ae=null,se=null;const oe=()=>(ae||(ae=document.createElement("div"),ae.id="dialog-container",document.body.appendChild(ae)),ae),ie=e=>new Promise(((t,n)=>{const r={...e,onAccept:async()=>{var r;try{await(null==(r=e.onAccept)?void 0:r.call(e)),t(!0)}catch(a){n(a)}},onCancel:()=>{var n;null==(n=e.onCancel)||n.call(e),t(!1)}};if(re){se.unmount();const e=oe();se=p(ne,r),re=se.mount(e)}else{const e=oe();se=p(ne,r),re=se.mount(e)}})),le=()=>({confirm:(e,t,n,r)=>ie({title:e,content:t,onAccept:n,onCancel:r})}),ce={install:e=>{e.config.globalProperties.$dialog={confirm:(e,t,n,r)=>ie({title:e,content:t,onAccept:n,onCancel:r})}}},ue=p(U);ue.use(D),ue.use(M),ue.use(ce),ue.mount("#app");export{le as a,L as u};
