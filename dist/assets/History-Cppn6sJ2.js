import{r as x,o as f,c as n,a as t,h as c,f as a,F as b,e as k,u as y,g as r,t as i,n as w}from"./index-DnXUMk2B.js";const h={class:"p-8"},S={class:"flex justify-between items-center mb-6"},H={key:0,class:"text-center text-gray-400 text-xl py-12"},C={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},$={class:"p-4"},E={class:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2 line-clamp-2"},I={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-3"},N={class:"h-1 bg-gray-200 dark:bg-gray-700 rounded-full mb-3"},T={class:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400"},B={class:"flex items-center space-x-2"},M={class:"flex gap-2"},V=["onClick"],j=["onClick"],z={__name:"History",setup(F){const u=y(),d=x([]),l=()=>{d.value=window.services.history.getHistories()},g=e=>{if(!e.episodes||e.episodes.length===0){console.error("无效的分集信息");return}u.push({path:`/player/${e.vod_id}`,query:{title:e.vod_name,vod_id:e.vod_id,vod_remarks:e.vod_remarks,vod_play_from:e.vod_play_from,type_id:e.type_id,type_name:e.type_name,episodes:JSON.stringify(e.episodes),currentEpisodeIndex:e.currentEpisodeIndex||0,time:e.currentTime||0}})},p=e=>{window.services.history.removeHistory(e),l()},m=()=>{confirm("确定要清空所有观看历史吗？")&&(window.services.history.clearHistories(),l())},_=e=>{if(!e)return"00:00";const o=Math.floor(e/60),s=Math.floor(e%60);return`${o.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`};return f(()=>{l()}),(e,o)=>(r(),n("div",h,[t("div",S,[o[1]||(o[1]=t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"观看历史",-1)),d.value.length>0?(r(),n("button",{key:0,class:"px-4 py-2 text-sm bg-red-500 text-white rounded-md transition-colors hover:bg-red-600",onClick:m},o[0]||(o[0]=[t("i",{class:"i-ri-delete-bin-3-line"},null,-1),a(" 清空历史 ")]))):c("",!0)]),d.value.length===0?(r(),n("div",H," 暂无观看历史 ")):(r(),n("div",C,[(r(!0),n(b,null,k(d.value,s=>(r(),n("div",{key:s.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden group"},[t("div",$,[t("h3",E,i(s.vod_name),1),s.vod_remarks?(r(),n("p",I,i(s.vod_remarks),1)):c("",!0),t("div",N,[t("div",{class:"h-full bg-blue-500 rounded-full",style:w({width:`${(s.currentEpisodeIndex+1)/s.episodes.length*100}%`})},null,4)]),t("div",T,[t("div",B,[t("span",null,i(_(s.currentTime)),1),o[2]||(o[2]=t("span",{class:"text-gray-400"},"|",-1)),t("span",null,"第 "+i(s.currentEpisodeIndex+1)+"/"+i(s.episodes.length)+" 集",1)]),t("div",M,[t("button",{class:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",onClick:v=>g(s)},o[3]||(o[3]=[t("i",{class:"i-ri-play-circle-line"},null,-1),a(" 继续观看 ")]),8,V),t("button",{class:"px-3 py-1 text-white hover:bg-red-600 transition-colors bg-red-500 rounded-md",onClick:v=>p(s.vod_id)},o[4]||(o[4]=[t("i",{class:"i-ri-delete-bin-2-line"},null,-1),a(" 删除 ")]),8,j)])])])]))),128))]))]))}};export{z as default};
//# sourceMappingURL=History-Cppn6sJ2.js.map
