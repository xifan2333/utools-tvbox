import{r as e,o as a,i as t,e as l,q as r,s,k as d,b as o,h as i,d as n,x as u,y as c,z as y,F as v,j as g,t as x,A as p,f as m}from"./vendor-Cr0QY1gi.js";const b={class:"p-8"},k={class:"mb-6"},f={key:0,class:"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-800 rounded-md p-4 mb-4"},h={class:"flex"},w={class:"ml-3"},_={class:"mt-2 text-sm text-yellow-700 dark:text-yellow-300"},j={class:"flex items-center space-x-4 mb-4"},C=["value"],S={key:0,class:"text-center py-12"},q={key:1,class:"text-center py-12 text-red-500"},z={key:2,class:"text-center py-12 text-gray-500 dark:text-gray-400"},D={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},I={class:"p-4"},N={class:"flex justify-between items-start mb-2"},U={class:"text-lg font-medium text-gray-800 dark:text-gray-200 line-clamp-2"},V={class:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded whitespace-nowrap ml-2"},A={class:"flex flex-wrap gap-2 mb-3"},F={class:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 rounded"},K={key:0,class:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300 rounded"},L={class:"text-xs text-gray-500 dark:text-gray-400 mb-3"},$={class:"flex justify-end"},B=["onClick"],E={__name:"Search",setup(E){const G=p(),H=e(""),J=e(""),M=e([]),O=e(!1),P=e(""),Q=e([]),R=async()=>{if(H.value.trim()){O.value=!0,P.value="",M.value=[];try{const e=await window.services.video.search(H.value,J.value||null);200===e.code?M.value=e.list:P.value=e.msg}catch(e){P.value="搜索失败，请稍后重试"}finally{O.value=!1}}else P.value="请输入搜索关键词"},T=e=>{if(!e)return"";return new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};return a((()=>{(()=>{const e=window.services.video.getSources();Q.value=e||[],0===Q.value.length&&(P.value="请先配置视频源")})()})),(e,a)=>{const p=i("router-link");return m(),t("div",b,[l("div",k,[0===Q.value.length?(m(),t("div",f,[l("div",h,[a[6]||(a[6]=l("div",{class:"flex-shrink-0"},[l("i",{class:"i-ri-information-line text-yellow-400"})],-1)),l("div",w,[a[5]||(a[5]=l("h3",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"}," 未配置视频源 ",-1)),l("div",_,[l("p",null,[a[3]||(a[3]=s(" 请前往设置页面添加视频源。点击 ")),d(p,{to:"/settings",class:"font-medium underline text-yellow-800 dark:text-yellow-200 hover:text-yellow-600 dark:hover:text-yellow-400"},{default:o((()=>a[2]||(a[2]=[s(" 这里 ")]))),_:1}),a[4]||(a[4]=s(" 进行配置。 "))])])])])])):r("",!0),l("div",j,[n(l("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>H.value=e),type:"text",class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200",placeholder:"输入关键词搜索",onKeyup:c(R,["enter"])},null,544),[[u,H.value]]),n(l("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>J.value=e),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200"},[a[7]||(a[7]=l("option",{value:""},"所有站点",-1)),(m(!0),t(v,null,g(Q.value,(e=>(m(),t("option",{key:e.id,value:e.id},x(e.name),9,C)))),128))],512),[[y,J.value]]),l("button",{onClick:R,class:"px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors"},a[8]||(a[8]=[l("i",{class:"i-ri-search-line"},null,-1),s(" 搜索 ")]))])]),O.value?(m(),t("div",S,a[9]||(a[9]=[l("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"},null,-1),l("p",{class:"mt-4 text-gray-500 dark:text-gray-400"},"搜索中...",-1)]))):P.value?(m(),t("div",q,x(P.value),1)):0===M.value.length?(m(),t("div",z," 暂无搜索结果 ")):(m(),t("div",D,[(m(!0),t(v,null,g(M.value,(e=>(m(),t("div",{key:e.vod_id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden group hover:shadow-lg transition-shadow"},[l("div",I,[l("div",N,[l("h3",U,x(e.vod_name),1),l("span",V,x(e.sourceName),1)]),l("div",A,[l("span",F,x(e.type_name),1),e.vod_remarks?(m(),t("span",K,x(e.vod_remarks),1)):r("",!0)]),l("p",L," 更新于 "+x(T(e.vod_time)),1),l("div",$,[l("button",{onClick:a=>(e=>{G.push({path:`/player/${e.vod_id}`,query:{title:e.vod_name,vod_id:e.vod_id,vod_remarks:e.vod_remarks,vod_play_from:e.vod_play_from,type_id:e.type_id,type_name:e.type_name,sourceId:e.sourceId}})})(e),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors"}," 播放 ",8,B)])])])))),128))]))])}}};export{E as default};
