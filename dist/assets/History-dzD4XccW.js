import{r as e,o as s,i as t,e as r,q as i,s as a,F as l,j as d,A as o,f as n,t as c,D as g}from"./vendor-Cr0QY1gi.js";import{a as p}from"./index-Dag2Ocym.js";const u={class:"p-8"},y={class:"flex justify-between items-center mb-6"},m={key:0,class:"text-center text-gray-400 text-xl py-12"},x={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},v={class:"p-4"},b={class:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2 line-clamp-2"},h={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-3"},f={class:"h-1 bg-gray-200 dark:bg-gray-700 rounded-full mb-3"},k={class:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400"},_={class:"flex items-center space-x-2"},w={class:"flex gap-2"},j=["onClick"],C=["onClick"],S={__name:"History",setup(S){const E=o(),H=p(),I=e([]),$=()=>{I.value=window.services.history.getHistories()},q=async()=>{await H.confirm("清空历史记录","确定要清空所有观看历史吗？此操作不可恢复。",(()=>{window.services.history.clearHistories(),$()}))},M=e=>{if(!e)return"00:00";const s=Math.floor(e/60),t=Math.floor(e%60);return`${s.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`};return s((()=>{$()})),(e,s)=>(n(),t("div",u,[r("div",y,[s[1]||(s[1]=r("h1",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"观看历史",-1)),I.value.length>0?(n(),t("button",{key:0,class:"px-4 py-2 text-sm bg-red-500 text-white rounded-md transition-colors hover:bg-red-600",onClick:q},s[0]||(s[0]=[r("i",{class:"i-ri-delete-bin-3-line"},null,-1),a(" 清空历史 ")]))):i("",!0)]),0===I.value.length?(n(),t("div",m," 暂无观看历史 ")):(n(),t("div",x,[(n(!0),t(l,null,d(I.value,(e=>(n(),t("div",{key:e.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden group"},[r("div",v,[r("h3",b,c(e.vod_name),1),e.vod_remarks?(n(),t("p",h,c(e.vod_remarks),1)):i("",!0),r("div",f,[r("div",{class:"h-full bg-blue-500 rounded-full",style:g({width:(e.currentEpisodeIndex+1)/e.episodes.length*100+"%"})},null,4)]),r("div",k,[r("div",_,[r("span",null,c(M(e.currentTime)),1),s[2]||(s[2]=r("span",{class:"text-gray-400"},"|",-1)),r("span",null,"第 "+c(e.currentEpisodeIndex+1)+"/"+c(e.episodes.length)+" 集",1)]),r("div",w,[r("button",{class:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",onClick:s=>(e=>{e.episodes&&0!==e.episodes.length&&E.push({path:`/player/${e.vod_id}`,query:{title:e.vod_name,vod_id:e.vod_id,vod_remarks:e.vod_remarks,vod_play_from:e.vod_play_from,type_id:e.type_id,type_name:e.type_name,episodes:JSON.stringify(e.episodes),currentEpisodeIndex:e.currentEpisodeIndex||0,time:e.currentTime||0}})})(e)},s[3]||(s[3]=[r("i",{class:"i-ri-play-circle-line"},null,-1),a(" 继续观看 ")]),8,j),r("button",{class:"px-3 py-1 text-white hover:bg-red-600 transition-colors bg-red-500 rounded-md",onClick:s=>(async e=>{await H.confirm("删除历史记录","确定要删除这条观看历史吗？",(()=>{window.services.history.removeHistory(e),$()}))})(e.vod_id)},s[4]||(s[4]=[r("i",{class:"i-ri-delete-bin-2-line"},null,-1),a(" 删除 ")]),8,C)])])])])))),128))]))]))}};export{S as default};
