import{r as n,o as f,c as o,a as t,w as p,v as w,b as S,d as V,F as _,e as x,f as C,t as d,u as D,g as a,h as N}from"./index-DnXUMk2B.js";const B={class:"p-8"},M={class:"mb-6"},j={class:"flex items-center space-x-4 mb-4"},F=["value"],I={key:0,class:"text-center py-12"},K={key:1,class:"text-center py-12 text-red-500"},L={key:2,class:"text-center py-12 text-gray-500 dark:text-gray-400"},R={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},T={class:"p-4"},U={class:"flex justify-between items-start mb-2"},$={class:"text-lg font-medium text-gray-800 dark:text-gray-200 line-clamp-2"},q={class:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded whitespace-nowrap ml-2"},z={class:"flex flex-wrap gap-2 mb-3"},E={class:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 rounded"},Q={key:0,class:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300 rounded"},A={class:"text-xs text-gray-500 dark:text-gray-400 mb-3"},G={class:"flex justify-end"},H=["onClick"],W={__name:"Search",setup(J){const b=D(),i=n(""),c=n(""),u=n([]),g=n(!1),l=n(""),v=n([]),h=()=>{v.value=window.services.video.getSources()},y=async()=>{if(!i.value.trim()){l.value="请输入搜索关键词";return}g.value=!0,l.value="",u.value=[];try{const e=await window.services.video.search(i.value,c.value||null);e.code===200?u.value=e.list:l.value=e.msg}catch(e){l.value="搜索失败，请稍后重试",console.error("搜索失败:",e)}finally{g.value=!1}},m=e=>{b.push({path:`/player/${e.vod_id}`,query:{title:e.vod_name,vod_id:e.vod_id,vod_remarks:e.vod_remarks,vod_play_from:e.vod_play_from,type_id:e.type_id,type_name:e.type_name,sourceId:e.sourceId}})},k=e=>e?new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return f(()=>{h()}),(e,r)=>(a(),o("div",B,[t("div",M,[t("div",j,[p(t("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>i.value=s),type:"text",class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200",placeholder:"输入关键词搜索",onKeyup:S(y,["enter"])},null,544),[[w,i.value]]),p(t("select",{"onUpdate:modelValue":r[1]||(r[1]=s=>c.value=s),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200"},[r[2]||(r[2]=t("option",{value:""},"所有站点",-1)),(a(!0),o(_,null,x(v.value,s=>(a(),o("option",{key:s.id,value:s.id},d(s.name),9,F))),128))],512),[[V,c.value]]),t("button",{onClick:y,class:"px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors"},r[3]||(r[3]=[t("i",{class:"i-ri-search-line"},null,-1),C(" 搜索 ")]))])]),g.value?(a(),o("div",I,r[4]||(r[4]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-500 dark:text-gray-400"},"搜索中...",-1)]))):l.value?(a(),o("div",K,d(l.value),1)):u.value.length===0?(a(),o("div",L," 暂无搜索结果 ")):(a(),o("div",R,[(a(!0),o(_,null,x(u.value,s=>(a(),o("div",{key:s.vod_id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden group hover:shadow-lg transition-shadow"},[t("div",T,[t("div",U,[t("h3",$,d(s.vod_name),1),t("span",q,d(s.sourceName),1)]),t("div",z,[t("span",E,d(s.type_name),1),s.vod_remarks?(a(),o("span",Q,d(s.vod_remarks),1)):N("",!0)]),t("p",A," 更新于 "+d(k(s.vod_time)),1),t("div",G,[t("button",{onClick:O=>m(s),class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors"}," 播放 ",8,H)])])]))),128))]))]))}};export{W as default};
//# sourceMappingURL=Search-CZzKoKV9.js.map
