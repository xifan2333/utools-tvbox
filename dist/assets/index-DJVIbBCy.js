const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Search-DC2tmSh2.js","./vendor-BIYNY2sw.js","./Player-Dcr5Q0cc.js","./Player-CuFCgI2M.css","./History-CFZBNR6b.js","./Settings-CE0iaVMe.js"])))=>i.map(i=>d[i]);
import{r as e,a as t,c as n,o as r,b as a,n as s,u as o,F as i,d as l,e as c,w as u,f as d,t as m,v as p,g,h as f,T as y,i as h,j as v,k as b,l as x,m as w,p as k}from"./vendor-BIYNY2sw.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const _=""+new URL("logo-Bipd5wes.png",import.meta.url).href,E={class:"p-4 flex items-center justify-between"},P=["src"],T={class:"mt-4 flex-1 overflow-auto"},C={class:"p-4 flex justify-center"},S=["title"],j={__name:"Sidebar",props:{isDark:{type:Boolean,default:!1}},emits:["toggle-theme"],setup(g,{emit:f}){const y=e(!0),h=f,v=[{name:"搜索",path:"/search",icon:"i-ri-search-line"},{name:"历史",path:"/history",icon:"i-ri-history-line"},{name:"设置",path:"/settings",icon:"i-ri-settings-line"}],b=()=>{y.value=!y.value},x=()=>{h("toggle-theme")};return(e,f)=>{const h=t("router-link");return r(),n("div",{class:s(["h-screen flex flex-col bg-light-600 dark:bg-gray-800 text-dark dark:text-gray-200 transition-all duration-300",y.value?"w-16":"w-64"])},[a("div",E,[a("div",{class:s(["flex items-center gap-2 transition-all duration-300",[y.value?"w-0 p-0 m-0 opacity-0 scale-95 pointer-events-none":"w-auto opacity-100 scale-100","overflow-hidden"]]),style:{"transition-property":"width, opacity, transform, margin, padding"}},[a("img",{src:o(_),class:"w-10 h-10 rounded-lg"},null,8,P),f[0]||(f[0]=a("h1",{class:"text-xl font-bold whitespace-nowrap"},"TV Box",-1))],2),a("button",{onClick:b,class:"p-2 bg-light-700 dark:bg-gray-700 hover:bg-light-800 dark:hover:bg-gray-600 rounded-lg transition-colors"},[a("i",{class:s([y.value?"i-ri-menu-fold-line":"i-ri-menu-unfold-line","text-xl"])},null,2)])]),a("nav",T,[(r(),n(i,null,l(v,(e=>c(h,{key:e.path,to:e.path,class:s(["flex items-center px-4 py-3 hover:bg-light-700 dark:hover:bg-gray-700 transition-colors",{"justify-center":y.value}]),"active-class":"bg-light-700 dark:bg-gray-700"},{default:u((()=>[a("i",{class:s([e.icon,"text-xl"])},null,2),d(a("span",{class:"ml-3"},m(e.name),513),[[p,!y.value]])])),_:2},1032,["to","class"]))),64))]),a("div",C,[a("button",{onClick:x,class:"p-2 bg-light-700 dark:bg-gray-700 hover:bg-light-800 dark:hover:bg-gray-600 rounded-lg transition-colors",title:g.isDark?"切换为亮色模式":"切换为暗色模式"},[a("i",{class:s([g.isDark?"i-ri-sun-line":"i-ri-moon-line","text-xl"])},null,2)],8,S)])],2)}}},A={class:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300"},L={class:"flex-1 overflow-auto p-4"},D={__name:"App",setup(s){const o=e(!1);g((()=>{const e=window.services.theme.getTheme();o.value="dark"===e,i()})),f(o,(e=>{i(),window.services.theme.setTheme(e?"dark":"light")}));const i=()=>{o.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},l=()=>{o.value=!o.value};return(e,s)=>{const i=t("router-view");return r(),n("div",A,[c(j,{"is-dark":o.value,onToggleTheme:l},null,8,["is-dark"]),a("main",L,[c(i,null,{default:u((({Component:e})=>[c(y,{name:"fade",mode:"out-in"},{default:u((()=>[(r(),h(v(e)))])),_:2},1024)])),_:1})])])}}},O={},q=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};const a=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),o=(null==s?void 0:s.nonce)||(null==s?void 0:s.getAttribute("nonce"));r=e(t.map((e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in O)return;O[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(!!n)for(let n=a.length-1;n>=0;n--){const r=a[n];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,o&&s.setAttribute("nonce",o),document.head.appendChild(s),t?new Promise(((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)}))},R=[{path:"/",redirect:"/search"},{path:"/search",name:"Search",component:()=>q((()=>import("./Search-DC2tmSh2.js")),__vite__mapDeps([0,1]),import.meta.url)},{path:"/player/:id",name:"Player",component:()=>q((()=>import("./Player-Dcr5Q0cc.js")),__vite__mapDeps([2,1,3]),import.meta.url)},{path:"/history",name:"History",component:()=>q((()=>import("./History-CFZBNR6b.js")),__vite__mapDeps([4,1]),import.meta.url)},{path:"/settings",name:"Settings",component:()=>q((()=>import("./Settings-CE0iaVMe.js")),__vite__mapDeps([5,1]),import.meta.url)}],I=b({history:x(),routes:R}),N={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},V={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},$={class:"inline-block align-middle bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},B={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},F={class:"sm:flex sm:items-start"},U={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},z={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-200",id:"modal-title"},H={class:"mt-2"},K={class:"text-sm text-gray-500 dark:text-gray-400"},M={__name:"Dialog",props:{title:{type:String,required:!0},content:{type:String,required:!0},onAccept:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}}},setup(t){const n=t,s=e(!1),o=()=>{s.value=!1},i=async()=>{await n.onAccept(),o()},l=()=>{n.onCancel(),o()};return g((()=>{s.value=!0})),(e,n)=>(r(),h(y,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:u((()=>[d(a("div",N,[a("div",V,[n[0]||(n[0]=a("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),a("div",$,[a("div",B,[a("div",F,[a("div",U,[a("h3",z,m(t.title),1),a("div",H,[a("p",K,m(t.content),1)])])])]),a("div",{class:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[a("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-500 text-base font-medium text-white hover:bg-blue-600 sm:ml-3 sm:w-auto sm:text-sm",onClick:i}," 确认 "),a("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:l}," 取消 ")])])])],512),[[p,s.value]])])),_:1}))}};let W=null,G=null,J=null;const Q=()=>(G||(G=document.createElement("div"),G.id="dialog-container",document.body.appendChild(G)),G),X=e=>new Promise(((t,n)=>{const r={...e,onAccept:async()=>{var r;try{await(null==(r=e.onAccept)?void 0:r.call(e)),t(!0)}catch(a){n(a)}},onCancel:()=>{var n;null==(n=e.onCancel)||n.call(e),t(!1)}};if(W){J.unmount();const e=Q();J=w(M,r),W=J.mount(e)}else{const e=Q();J=w(M,r),W=J.mount(e)}})),Y=()=>({confirm:(e,t,n,r)=>X({title:e,content:t,onAccept:n,onCancel:r})}),Z={install:e=>{e.config.globalProperties.$dialog={confirm:(e,t,n,r)=>X({title:e,content:t,onAccept:n,onCancel:r})}}},ee={class:"text-white"},te={__name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"info",validator:e=>["success","warning","error","info"].includes(e)},duration:{type:Number,default:3e3},position:{type:String,default:"top",validator:e=>["top","bottom","center"].includes(e)}},setup(t){const n=t,o=e(!1),i=e(null),l={success:"i-ri-checkbox-circle-line",warning:"i-ri-alert-line",error:"i-ri-close-circle-line",info:"i-ri-information-line"},c={success:"bg-green-500",warning:"bg-yellow-500",error:"bg-red-500",info:"bg-gray-500"},v=()=>{o.value=!0,n.duration>0&&(i.value&&clearTimeout(i.value),i.value=setTimeout((()=>{o.value=!1}),n.duration))};return f((()=>n.message),(()=>{v()})),g((()=>{v()})),k((()=>{i.value&&clearTimeout(i.value)})),(e,n)=>(r(),h(y,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform translate-y-2 opacity-0"},{default:u((()=>[d(a("div",{class:s(["fixed left-1/2 transform -translate-x-1/2 z-50 px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2",[c[t.type],"top"===t.position?"top-4":"bottom"===t.position?"bottom-4":"top-1/2 -translate-y-1/2"]])},[a("i",{class:s([l[t.type],"text-white text-xl"])},null,2),a("span",ee,m(t.message),1)],2),[[p,o.value]])])),_:1}))}},ne={duration:3e3,position:"top"};let re=null,ae=null,se=null;const oe=()=>(ae||(ae=document.createElement("div"),ae.id="toast-container",document.body.appendChild(ae)),ae),ie=e=>{const t={...ne,...e};if(re){se.unmount();const e=oe();se=w(te,t),re=se.mount(e)}else{const e=oe();se=w(te,t),re=se.mount(e)}return new Promise((e=>{setTimeout((()=>{e()}),t.duration)}))},le=()=>({success:(e,t=ne.duration)=>ie({message:e,type:"success",duration:t}),warning:(e,t=ne.duration)=>ie({message:e,type:"warning",duration:t}),error:(e,t=ne.duration)=>ie({message:e,type:"error",duration:t}),info:(e,t=ne.duration)=>ie({message:e,type:"info",duration:t})}),ce={install:e=>{e.config.globalProperties.$toast={success:(e,t=ne.duration)=>ie({message:e,type:"success",duration:t}),warning:(e,t=ne.duration)=>ie({message:e,type:"warning",duration:t}),error:(e,t=ne.duration)=>ie({message:e,type:"error",duration:t}),info:(e,t=ne.duration)=>ie({message:e,type:"info",duration:t})}}},ue=w(D);ue.use(ce),ue.use(I),ue.use(Z),ue.mount("#app");export{Y as a,le as u};
