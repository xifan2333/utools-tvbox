{"version":3,"file":"Settings-DJcXVDB-.js","sources":["../../src/views/Settings.vue"],"sourcesContent":["<template>\n  <div class=\"p-8\">\n    <h1 class=\"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-6\">站点设置</h1>\n    \n    <!-- 添加新站点 -->\n    <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6\">\n      <h2 class=\"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4\">添加新站点</h2>\n      <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">站点名称</label>\n          <input\n            v-model=\"newSource.name\"\n            type=\"text\"\n            class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200\"\n            placeholder=\"输入站点名称\"\n          >\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">站点ID</label>\n          <input\n            v-model=\"newSource.id\"\n            type=\"text\"\n            class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200\"\n            placeholder=\"输入站点ID（英文）\"\n          >\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">API地址</label>\n          <input\n            v-model=\"newSource.api\"\n            type=\"text\"\n            class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200\"\n            placeholder=\"输入API地址\"\n          >\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">详情页地址</label>\n          <input\n            v-model=\"newSource.detail\"\n            type=\"text\"\n            class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200\"\n            placeholder=\"输入详情页地址\"\n          >\n        </div>\n      </div>\n      <div class=\"mt-4\">\n        <button\n          @click=\"addSource\"\n          class=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors\"\n        >\n          <i class=\"i-ri-add-box-line\"></i>\n          添加站点\n        </button>\n      </div>\n    </div>\n\n    <!-- 站点列表 -->\n    <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\n      <h2 class=\"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4\">站点列表</h2>\n      <div class=\"space-y-4\">\n        <div\n          v-for=\"source in sources\"\n          :key=\"source.id\"\n          class=\"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\n          :class=\"{ 'border-blue-500 dark:border-blue-500': source.enabled }\"\n        >\n          <div class=\"flex items-center space-x-4\">\n            <div>\n              <div class=\"flex items-center space-x-2\">\n                <h3 class=\"font-medium text-gray-800 dark:text-gray-200\">{{ source.name }}</h3>\n                <span\n                  v-if=\"source.enabled\"\n                  class=\"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 rounded\"\n                >\n                  已启用\n                </span>\n              </div>\n              <p class=\"text-sm text-gray-500 dark:text-gray-400\">{{ source.api }}</p>\n            </div>\n          </div>\n          <div class=\"flex items-center space-x-2\">\n            <button\n              v-if=\"!source.enabled\"\n              @click=\"enableSource(source.id)\"\n              class=\"px-3 py-1 bg-green-500 text-white rounded-md transition-colors hover:bg-green-600\"\n            >\n              <i class=\"i-ri-check-line\"></i>\n              启用\n            </button>\n            <button\n              v-else\n              @click=\"disableSource(source.id)\"\n              class=\"px-3 py-1 bg-yellow-500 text-white rounded-md transition-colors hover:bg-yellow-600\"\n            >\n              <i class=\"i-ri-close-line\"></i>\n              禁用\n            </button>\n            <button\n              @click=\"removeSource(source.id)\"\n              class=\"px-3 py-1 bg-red-500 text-white rounded-md transition-colors hover:bg-red-600\"\n            >\n              <i class=\"i-ri-delete-bin-2-line\"></i>  \n              删除\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\n\nconst sources = ref([])\nconst newSource = ref({\n  id: '',\n  name: '',\n  api: '',\n  detail: '',\n  enabled: true\n})\n\n// 加载站点列表\nconst loadSources = () => {\n  sources.value = window.services.video.getSources()\n}\n\n// 添加新站点\nconst addSource = () => {\n  if (!newSource.value.id || !newSource.value.name || !newSource.value.api || !newSource.value.detail) {\n    alert('请填写完整的站点信息')\n    return\n  }\n\n  // 检查ID是否已存在\n  if (sources.value.some(s => s.id === newSource.value.id)) {\n    alert('站点ID已存在')\n    return\n  }\n\n  window.services.video.addSource({\n    ...newSource.value,\n    enabled: true // 新添加的站点默认启用\n  })\n\n  // 重置表单\n  newSource.value = {\n    id: '',\n    name: '',\n    api: '',\n    detail: '',\n    enabled: true\n  }\n\n  loadSources()\n}\n\n// 切换站点启用状态\nconst enableSource = (sourceId) => {\n  window.services.video.enableSource(sourceId)\n  loadSources()\n}\n\n// 禁用站点\nconst disableSource = (sourceId) => {\n  window.services.video.disableSource(sourceId)\n  loadSources()\n}\n\n// 删除站点\nconst removeSource = (sourceId) => {\n  if (confirm('确定要删除这个站点吗？')) {\n    const updatedSources = sources.value.filter(s => s.id !== sourceId)\n    window.utools.dbStorage.setItem('sources', updatedSources)\n    loadSources()\n  }\n}\n\nonMounted(() => {\n  loadSources()\n})\n</script> "],"names":["sources","ref","newSource","loadSources","addSource","s","enableSource","sourceId","disableSource","removeSource","updatedSources","onMounted"],"mappings":"gvBAkHA,MAAMA,EAAUC,EAAI,CAAE,CAAA,EAChBC,EAAYD,EAAI,CACpB,GAAI,GACJ,KAAM,GACN,IAAK,GACL,OAAQ,GACR,QAAS,EACX,CAAC,EAGKE,EAAc,IAAM,CACxBH,EAAQ,MAAQ,OAAO,SAAS,MAAM,WAAU,CAClD,EAGMI,EAAY,IAAM,CACtB,GAAI,CAACF,EAAU,MAAM,IAAM,CAACA,EAAU,MAAM,MAAQ,CAACA,EAAU,MAAM,KAAO,CAACA,EAAU,MAAM,OAAQ,CACnG,MAAM,YAAY,EAClB,MACJ,CAGE,GAAIF,EAAQ,MAAM,KAAKK,GAAKA,EAAE,KAAOH,EAAU,MAAM,EAAE,EAAG,CACxD,MAAM,SAAS,EACf,MACJ,CAEE,OAAO,SAAS,MAAM,UAAU,CAC9B,GAAGA,EAAU,MACb,QAAS,EACV,CAAA,EAGDA,EAAU,MAAQ,CAChB,GAAI,GACJ,KAAM,GACN,IAAK,GACL,OAAQ,GACR,QAAS,EACb,EAEEC,EAAW,CACb,EAGMG,EAAgBC,GAAa,CACjC,OAAO,SAAS,MAAM,aAAaA,CAAQ,EAC3CJ,EAAW,CACb,EAGMK,EAAiBD,GAAa,CAClC,OAAO,SAAS,MAAM,cAAcA,CAAQ,EAC5CJ,EAAW,CACb,EAGMM,EAAgBF,GAAa,CACjC,GAAI,QAAQ,aAAa,EAAG,CAC1B,MAAMG,EAAiBV,EAAQ,MAAM,OAAOK,GAAKA,EAAE,KAAOE,CAAQ,EAClE,OAAO,OAAO,UAAU,QAAQ,UAAWG,CAAc,EACzDP,EAAW,CACf,CACA,EAEA,OAAAQ,EAAU,IAAM,CACdR,EAAW,CACb,CAAC"}